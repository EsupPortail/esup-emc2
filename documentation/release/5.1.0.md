# Version 5.1.0 RC (28/04/2025) 

## Changements 

[NOUVEAUTE]
* Ajout de l'importation en masse depuis REFERENS3 avec création des données connexes

## Modification de la configuration

Aucun

## Modification en BD

[SANS BDDADMIN] Modification des tables associées aux métiers
```postgresql
drop table metier_domaine_famille;

create table metier_metier_domaine
(
    metier_id  integer not null
        constraint metier_domaine_metier_id_fk
            references metier_metier
            on delete cascade,
    domaine_id integer not null
        constraint metier_domaine_domaine_id_fk
            references metier_domaine
            on delete cascade,
    constraint metier_domaine_pk
        primary key (domaine_id, metier_id)
);
create index metier_metier_domaine_domaine_id_index on metier_metier_domaine (domaine_id);
create index metier_metier_domaine_metier_id_index on metier_metier_domaine (metier_id);


create table metier_metier_famille
(
    metier_id  integer not null
        constraint metier_metier_famille_metier_metier_id_fk
            references metier_metier on delete cascade,
    famille_id integer not null
        constraint metier_metier_famille_metier_familleprofessionnelle_id_fk
            references metier_familleprofessionnelle on delete cascade,
    constraint metier_metier_famille_pk primary key (metier_id, famille_id)
);
create index metier_metier_famille_famille_id_index on metier_metier_famille (famille_id);
create index metier_metier_famille_metier_id_index on metier_metier_famille (metier_id);


```

Modification des paramètres décrivant la version
```postgresql
update unicaen_parametre_parametre set valeur='5.1.0 RC' where code='VERSION';
update unicaen_parametre_parametre set valeur='28/04/2025' where code='RELEASE_DATE';
```

## Évolution des librairies

Nouvelle version de unicaen/autoform (6.2.0) ajout de nouveaux champs et meilleurs interface de gestion (bac à sable, exemples, ...)
Nouvelle version de unicaen/authentification (6.4.5) correction du bug rencontré par Avignon et Toulon

```bash
composer update unicaen/autoform
composer update unicaen/authentification
```

ou

```bash
rm -fr vendor
rm -fr composer.lock
composer install
```

## Évolution des macros et templates

Aucun

## Évolution des paramètres

Aucun

## Évolution de la liste des privileges

### Gestion des types de champs (UnicaenAutoform)

Une nouvelle catégorie de privilèges `Autoform - Gestion des type de champs` a été ajoutée pour permettre de regrouper les privilèges associés à la manipulation des type de champ.
Cette catégorie contient pour le moment trois privilèges :
1. `champtype_index` : Contrôle l'accés à la liste des types de champs
2. `champtype_afficher` : L'affichage d'un type de champs
3. `champtype_modification` : La modificaiton d'informations associées au type (libellé et description)