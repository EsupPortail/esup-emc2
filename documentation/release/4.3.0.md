Version 4.2.2 (13/12/2023)
====

Évolution
---
- [MesFormations] Intégration des interfaces de déclaration des stagiaires externes
- [MesFormations] Intégration des stagiaires aux formations internes

Modification en BD
---

```postgresql
--STAGIAIRE EXTERNE
create table formation_stagiaire_externe
(
    id                    serial                  not null
        constraint formation_stagiaire_externe_pk
            primary key,
    prenom                varchar(1024)           not null,
    nom                   varchar(1024)           not null,
    date_naissance        timestamp,
    sexe                  varchar(1),
    structure             varchar(1024),
    email                 varchar(1024)           not null,
    login                 varchar(1024),
    utilisateur_id        integer
        constraint formation_stagiaire_externe_unicaen_utilisateur_user_id_fk4
            references unicaen_utilisateur_user,
    histo_creation        timestamp default now() not null,
    histo_createur_id     integer   default 0     not null
        constraint formation_stagiaire_externe_unicaen_utilisateur_user_id_fk
            references unicaen_utilisateur_user,
    histo_modification    timestamp,
    histo_modificateur_id integer
        constraint formation_stagiaire_externe_unicaen_utilisateur_user_id_fk3
            references unicaen_utilisateur_user,
    histo_destruction     timestamp,
    histo_destructeur_id  integer
        constraint formation_stagiaire_externe_unicaen_utilisateur_user_id_fk2
            references unicaen_utilisateur_user
);

alter table formation_stagiaire_externe
    add utilisateur_id integer;

alter table formation_stagiaire_externe
    add constraint formation_stagiaire_externe_unicaen_utilisateur_user_id_fk4
        foreign key (utilisateur_id) references unicaen_utilisateur_user;


INSERT INTO unicaen_privilege_categorie (code, libelle, ordre, namespace)
VALUES ('stagiaireexterne', 'Gestion des stagiaires externes', 'Formation\Provider\Privilege', 100402);
INSERT INTO unicaen_privilege_privilege(CATEGORIE_ID, CODE, LIBELLE, ORDRE)
WITH d(code, lib, ordre) AS (
    SELECT 'stagiaireexterne_index', 'Accéder à l''index', 10 UNION
    SELECT 'stagiaireexterne_afficher', 'Afficher', 20 UNION
    SELECT 'stagiaireexterne_ajouter', 'Ajouter', 30 UNION
    SELECT 'stagiaireexterne_modifier', 'Modifier', 40 UNION
    SELECT 'stagiaireexterne_historiser', 'Historiser/Restaurer', 50 UNION
    SELECT 'stagiaireexterne_supprimer', 'Supprimer', 60
)
SELECT cp.id, d.code, d.lib, d.ordre
FROM d
JOIN unicaen_privilege_categorie cp ON cp.CODE = 'stagiaireexterne';

INSERT INTO unicaen_utilisateur_role (role_id, libelle, is_default, is_auto, parent_id, ldap_filter, accessible_exterieur, description)
VALUES ('Stagiaire externe', 'Stagiaire externe', false, true, null, null, true, 'Stagiaire qui n''est pas un·e agent·e connu·e ');



--TODO fournir le script de migration
```

Evolution des librairies
---

- `unicaen\autoform` passage à la version 6.0.5


```bash
composer upgrade unicaen/autoform
```

ou

```bash
rm -fr vendor
rm -fr composer.lock
composer install
```

Evolution des macros et templates
---
