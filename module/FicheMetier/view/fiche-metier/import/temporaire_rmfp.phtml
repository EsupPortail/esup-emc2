<?php

use FicheMetier\Entity\Db\FicheMetier;

/**
 * @var FicheMetier[] $fiches
 * @var string[] $warning
 */

?>

<?php if (!empty($warning)) : ?>
    <?php foreach ($warning as $item) : ?>
        <?php echo $item; ?> <br/>
    <?php endforeach; ?>
<?php endif; ?>

<?php foreach ($fiches as $fiche) : ?>
    <h3>
        <span class="badge"><?php echo $fiche->getCode()?$fiche->getCode():"Aucun code"; ?></span>
        <?php echo $fiche->getLibelle(); ?> </h3>

    <?php foreach ($fiche->getMissions() as $mission) : ?>
        <div class="card">
            <div class="card-header"> <?php echo $mission->getMission()->getLibelle(); ?></div>
            <ul>
            <?php foreach ($mission->getMission()->getActivites() as $activite) : ?>
                <li> <?php echo $activite->getLibelle(); ?> </li>
            <?php endforeach; ?>
            </ul>
        </div>
    <?php endforeach; ?>

    <ul>
    <?php foreach ($fiche->getCompetenceListe() as $competence) : ?>
        <li>
            <?php echo $competence->getCompetence()->getLibelle(); ?>
            <span class="badge"><?php echo $competence->getCompetence()->getType()?->getLibelle(); ?></span>
            <span class="badge" style="background:<?php echo $competence->getCompetence()->getReferentiel()->getCouleur(); ?>;"><?php echo $competence->getCompetence()->getReferentiel()?->getLibelleCourt(); ?></span>
        </li>
    <?php endforeach; ?>
    </ul>
<?php endforeach; ?>
