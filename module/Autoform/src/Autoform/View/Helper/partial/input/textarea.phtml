<?php
/**
 * @var Champ $champ
 * @var string $reponse
 */

use Autoform\Entity\Db\Champ;

$options = explode(';', $champ->getOptions());
?>

<div class="row">
<div class="form-group">
<!--    <label for="textarea_--><?php //echo $champ->getId(); ?><!--" class="col-sm-2 control-label">-->
    <strong><?php echo $champ->getLibelle(); ?>&nbsp;:</strong><br/>
<!--    </label>-->
    <div class="col-sm-12">
        <textarea class="form-control autoform-textarea" id="textarea_<?php echo $champ->getId(); ?>" name="<?php echo $champ->getId(); ?>" ><?php echo trim($reponse); ?></textarea>
        <br/>
        </div>

</div>
</div>

<style>
    textarea {
        margin-bottom : 10px;
    }
</style>

<script>
    $(document).ready(function() {
        tinymce.remove();
        tinymce.init({
            selector: '.autoform-textarea',
            toolbar: 'newdocument undo redo | bold italic underline removeformat | bullist',
            resize: true,
            language: 'fr_FR',
            plugins: 'lists',
            statusbar: true,
            browser_spellcheck : true,
            branding: false,
            menu: {},
            body_id: 'textarea_<?php echo $champ->getId(); ?>',
            setup: function (editor) {
                 editor.on("focusout", function () {
                     console.log('textarea_<?php echo $champ->getId(); ?>');
                     console.log(tinymce.get('textarea_<?php echo $champ->getId(); ?>').getContent());
                     $('textarea_<?php echo $champ->getId(); ?>').val(tinymce.get('textarea_<?php echo $champ->getId(); ?>').getContent());
                 });
            }
        });
    });
</script>