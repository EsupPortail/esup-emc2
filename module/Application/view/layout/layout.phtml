<?php

$navigationHelper = $this->navigation('navigation');

?>

<script>
    function generateAdresse(name, domaine) {
        document.write("<a href=" + "mail" + "to:" + name + "@" + domaine + ">" + name + "@"+ domaine + "</a>");
    }
</script>

<?php echo $this->doctype(); ?>
<html lang="fr">
<head>
    <!-- Meta -->
    <meta charset="utf-8">
    <?php echo $this->headMeta()->appendName('viewport', 'width=device-width, initial-scale=1.0')
        ->appendName('description', '')
        ->appendHttpEquiv("X-UA-Compatible", "IE=edge,chrome=1") ?>
    <!-- Title -->
    <?php echo $this->headTitle($this->appInfos()->nom)->setSeparator(' - ')->setAutoEscape(false) ?>
    <!-- Links -->
    <?php echo $this->headLink(array(
        'rel'   => 'shortcut icon',
        'type'  => 'image/vnd.microsoft.icon',
        'href'  => '//www.unicaen.fr/favicon.ico')) ?>
    <!-- Scripts -->
    <?php echo $this->headScript(); ?>
</head>

<body class="<?php  echo getenv('APPLICATION_ENV'); ?>">
    <header>
    <div id="navbar" class="navbar" >
        <?php $connecte = $this->appConnection()->getView()->plugin('userCurrent')->getIdentity(); ?>
        <div class="navbar-element" id="navbar-logo"
             <?php if ($connecte !== null) : ?>
                style="display:none;"
             <?php endif; ?>
        >
            <img src='/img/unicaen-logo-blanc.svg' alt='Logo UniCaen' class='navbar-logo-unicaen' />
        </div>
        <div class="navbar-element navbar-appname">
                    <?php
                    $version = null;
                    switch(getenv('APPLICATION_ENV')) {
                        case 'production' :
                            break;
                        case 'test' :
//                            $version = "<span class='version test'>Version de test</span>";
                            break;
                        case 'development' :
//                            $version = "<span class='version development'>Version de développement</span>";
                            break;
                        default :
//                            $version = "<span class='version inconnue'>Version inconnue</span>";
                            break;
                    }
                    echo $this->appLink($this->appInfos()->nom, $version);
                    ?>
        </div>
        <div class="navbar-collapse bs-navbar-collapse collapse">
            <?php echo $navigationHelper
                ->menu()
                ->setUlClass('nav navbar-nav')
                ->setPartial('layout/navigation-octopus.phtml');
            ?>
            <div class="navbar-element navbar-connection">
                <?php echo $this->appConnection(); ?>
            </div>
        </div>
</div>
</header>

<div style="display: flex; flex-wrap: nowrap;">
    <div id="contenu-principal" class="container">
        <?php echo $this->content; ?>
    </div>
</div>

<footer>
    <ul>
        <li>
            <a class="footer-logo-normandie-universite" target="_blank" href="http://normandie-univ.fr/">
                <img src="/img/normandie-universite-logo.svg" alt="Logo Nomandie Université" class="footer-logo-normandie-universite" />
            </a>
        </li>
        <li class="menu">
            <?php echo $navigationHelper->menuPiedDePage('navigation'); ?></li>
        <li>
            <img src="/img/republique-francaise-logo.svg" alt="Logo République française" class="footer-logo-republique-francaise" />
        </li>
        <li>
            <a class="footer-logo-unicaen" target="_blank" href="http://www.unicaen.fr/">
                <img src="/img/unicaen-logo-noir.svg" alt="Logo UniCaen" class="footer-logo-unicaen" />
            </a>
        </li>
    </ul>
</footer>

<?php echo $this->inlineScript(); ?>

</body>
</html>

<script>
    $(function () {
        $('[data-toggle="popover"]').popover({ html: true});
    });
    $(function () {
        $('[data-toggle="tooltip"]').tooltip({});
    });
</script>