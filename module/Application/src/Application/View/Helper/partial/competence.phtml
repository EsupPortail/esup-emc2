<?php

/**
 * @var Competence $competence
 * @var array $options
 */

use Application\Entity\Db\Competence;

$option_li = (isset($options['li']) AND $options['li'] === true );
$option_theme = (isset($options['theme']) AND $options['theme'] === true );
$option_type = (isset($options['type']) AND $options['type'] === true );
$source = isset($options['source'])?$options['source']:[];
?>


<?php if ($option_li) : ?>
    <li>
<?php endif; ?>
    <?php if ($option_type): ?>
        <span class="badge <?php echo ($competence->getType())?$competence->getType()->getLibelle():"Sans type"; ?>">
            <?php echo ($competence->getType())?$competence->getType()->getLibelle():"Sans type"; ?>
        </span>
    <?php endif; ?>
    <?php if ($option_theme): ?>
        <?php echo ($competence->getTheme())?$competence->getTheme()->getLibelle():"Sans thème"; ?> -
    <?php endif; ?>
    <?php echo $competence->getLibelle(); ?>
    <?php foreach($source as $item) : ?>
        <?php $split = explode('|', $item); ?>
        <?php if($split[0] === 'personne') : ?>
            <span class="agent" title="Associée à l'agent'">P</span>
        <?php endif; ?>
        <?php if($split[0] === 'fiche') : ?>
            <span class="fiche-metier" title="Associée à la fiche métier [<?php echo $split[1]; ?>]">F</span>
        <?php endif; ?>
        <?php if($split[0] === 'activite') : ?>
            <span class="activite" title="Associée à l'activité [<?php echo $split[1]; ?>]">A</span>
        <?php endif; ?>
    <?php endforeach; ?>
<?php if ($option_li) : ?>
    </li>
<?php endif; ?>
