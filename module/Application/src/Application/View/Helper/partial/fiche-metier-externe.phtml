<?php

/**
 * @var FicheTypeExterne $fiche
 * @var boolean $actionnable
 */

use Application\Entity\Db\FicheTypeExterne;
use Application\Entity\Db\Formation;

?>

<div class="panel panel-info">
    <div class="panel-heading">
        <div class="row">
            <div class="col-md-8">
                <h2> <?php echo $fiche->getFicheType()->getMetier()->getLibelle(); ?> </h2>
            </div>
            <div class="col-md-1 pull-right">
                <?php if ($actionnable === true) : ?>
                    <a href="<?php echo $this->url('fiche-poste/modifier-fiche-metier', ['fiche-poste' => $fiche->getFichePoste()->getId(), 'fiche-type-externe' => $fiche->getId()], [], true); ?>"
                       class="ajax-modal" data-event="modification">
                       <span class="icon editer" title="Éditer la fiche type externe"></span></a>
                    <a href="<?php echo $this->url('fiche-poste/selectionner-activite', ['fiche-poste' => $fiche->getFichePoste()->getId(), 'fiche-type-externe' => $fiche->getId()], [], true); ?>"
                       class="ajax-modal" data-event="modification">
                       <span class="icon listing" title="Sélectionner les activités associées"></span></a>
                    <a href="<?php echo $this->url('fiche-poste/retirer-fiche-metier', ['fiche-poste' => $fiche->getFichePoste()->getId(), 'fiche-type-externe' => $fiche->getId()], [], true); ?>">
                        <span class="icon detruire" title="Retirer la fiche type externe"></span></a>
                <?php endif; ?>
            </div>
            <div class="col-md-2 pull-right">
                <?php if ($fiche->getPrincipale()) : ?>
                    Principale <br/>
                <?php endif ;?>
                <?php echo $fiche->getQuotite(); ?> %
            </div>
        </div>
    </div>
    <div class="panel-body">
        <?php echo $this->ficheMetier($fiche->getFicheType(), ['sans-titre' => true, 'activite-liste' => $fiche->getActivites()]); ?>
    </div>
</div>