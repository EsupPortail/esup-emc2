<?xml version="1.0" encoding="utf-8"?>
<doctrine-mapping xmlns="http://doctrine-project.org/schemas/orm/doctrine-mapping" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://doctrine-project.org/schemas/orm/doctrine-mapping http://doctrine-project.org/schemas/orm/doctrine-mapping.xsd">
    <entity name="Formation\Entity\Db\Formation" table="formation">

        <id name="id" type="integer" column="id">
            <generator strategy="IDENTITY"/>
        </id>

        <field name="libelle"       column="libelle"        type="string"       length="256"   />
        <field name="description"   column="description"    type="string"       length="2048"  />
        <field name="lien"          column="lien"           type="string"       length="1024"  />

        <many-to-one target-entity="Formation\Entity\Db\FormationGroupe"  field="groupe">
            <join-column name="groupe_id" referenced-column-name="id"/>
        </many-to-one>

        <one-to-many field="instances" target-entity="Formation\Entity\Db\FormationInstance" mapped-by="formation"/>
        <one-to-many field="abonnements" target-entity="Formation\Entity\Db\FormationAbonnement" mapped-by="formation"/>

        <many-to-many field="applications" target-entity="Element\Entity\Db\ApplicationElement" inversed-by="application" fetch="LAZY">
            <join-table name="formation_obtenue_application">
                <join-columns>
                    <join-column name="formation_id" referenced-column-name="id"/>
                </join-columns>
                <inverse-join-columns>
                    <join-column name="application_element_id" referenced-column-name="id"/>
                </inverse-join-columns>
            </join-table>
        </many-to-many>

        <many-to-many field="competences" target-entity="Element\Entity\Db\CompetenceElement" inversed-by="competence" fetch="LAZY">
            <join-table name="formation_obtenue_competence">
                <join-columns>
                    <join-column name="formation_id" referenced-column-name="id"/>
                </join-columns>
                <inverse-join-columns>
                    <join-column name="competence_element_id" referenced-column-name="id"/>
                </inverse-join-columns>
            </join-table>
        </many-to-many>
        An exception occurred while executing 'SELECT f0_.libelle AS libelle_0, f0_.description AS description_1, f0_.lien AS lien_2, f0_.source AS source_3, f0_.id_source AS id_source_4, f0_.histo_creation AS histo_creation_5, f0_.histo_modification AS histo_modification_6, f0_.histo_destruction AS histo_destruction_7, f0_.id AS id_8, f1_.libelle AS libelle_9, f1_.description AS description_10, f1_.couleur AS couleur_11, f1_.ordre AS ordre_12, f1_.source AS source_13, f1_.id_source AS id_source_14, f1_.histo_creation AS histo_creation_15, f1_.histo_modification AS histo_modification_16, f1_.histo_destruction AS histo_destruction_17, f1_.id AS id_18, e2_.commentaire AS commentaire_19, e2_.clef AS clef_20, e2_.histo_creation AS histo_creation_21, e2_.histo_modification AS histo_modification_22, e2_.histo_destruction AS histo_destruction_23, e2_.id AS id_24, e3_.type AS type_25, e3_.libelle AS libelle_26, e3_.niveau AS niveau_27, e3_.description AS description_28, e3_.histo_creation AS histo_creation_29, e3_.histo_modification AS histo_modification_30, e3_.histo_destruction AS histo_destruction_31, e3_.id AS id_32, e4_.commentaire AS commentaire_33, e4_.clef AS clef_34, e4_.histo_creation AS histo_creation_35, e4_.histo_modification AS histo_modification_36, e4_.histo_destruction AS histo_destruction_37, e4_.id AS id_38, e5_.type AS type_39, e5_.libelle AS libelle_40, e5_.niveau AS niveau_41, e5_.description AS description_42, e5_.histo_creation AS histo_creation_43, e5_.histo_modification AS histo_modification_44, e5_.histo_destruction AS histo_destruction_45, e5_.id AS id_46, f0_.groupe_id AS groupe_id_47, f0_.histo_createur_id AS histo_createur_id_48, f0_.histo_modificateur_id AS histo_modificateur_id_49, f0_.histo_destructeur_id AS histo_destructeur_id_50, f1_.histo_createur_id AS histo_createur_id_51, f1_.histo_modificateur_id AS histo_modificateur_id_52, f1_.histo_destructeur_id AS histo_destructeur_id_53, e2_.validation_id AS validation_id_54, e2_.competence_id AS competence_id_55, e2_.niveau_id AS niveau_id_56, e2_.histo_createur_id AS histo_createur_id_57, e2_.histo_modificateur_id AS histo_modificateur_id_58, e2_.histo_destructeur_id AS histo_destructeur_id_59, e3_.histo_createur_id AS histo_createur_id_60, e3_.histo_modificateur_id AS histo_modificateur_id_61, e3_.histo_destructeur_id AS histo_destructeur_id_62, e4_.validation_id AS validation_id_63, e4_.application_id AS application_id_64, e4_.niveau_id AS niveau_id_65, e4_.histo_createur_id AS histo_createur_id_66, e4_.histo_modificateur_id AS histo_modificateur_id_67, e4_.histo_destructeur_id AS histo_destructeur_id_68, e5_.histo_createur_id AS histo_createur_id_69, e5_.histo_modificateur_id AS histo_modificateur_id_70, e5_.histo_destructeur_id AS histo_destructeur_id_71 FROM formation f0_ LEFT JOIN formation_groupe f1_ ON f0_.groupe_id = f1_.id LEFT JOIN formation_obtenue_competence f6_ ON f0_.id = f6_.formation_id LEFT JOIN element_competence_element e2_ ON e2_.id = f6_.competence_element_id LEFT JOIN element_niveau e3_ ON e2_.niveau_id = e3_.id LEFT JOIN formation_obtenue_application f7_ ON f0_.id = f7_.formation_id LEFT JOIN element_application_element e4_ ON e4_.id = f7_.application_element_id LEFT JOIN element_niveau e5_ ON e4_.niveau_id = e5_.id ORDER BY f1_.libelle ASC, f0_.libelle ASC':

        SQLSTATE[42703]: Undefined column: 7 ERROR:  column f1_.description does not exist
        LINE 1: ...tion_7, f0_.id AS id_8, f1_.libelle AS libelle_9, f1_.descri...
        ^
        HINT:  Perhaps you meant to reference the column "f0_.description"
        <!-- SOURCE ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
        <field name="source"            type="string" length="256"      column="source"             nullable="true"/>
        <field name="idSource"          type="string" length="256"      column="id_source"          nullable="true"/>

        <!-- HISTORISATION ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
        <field name="histoCreation"     type="datetime"                 column="histo_creation"     nullable="false"/>
        <field name="histoModification" type="datetime"                 column="histo_modification" nullable="false"/>
        <field name="histoDestruction"  type="datetime"                 column="histo_destruction"  nullable="true"/>
        <many-to-one target-entity="UnicaenUtilisateur\Entity\Db\User"  field="histoCreateur">
            <join-column name="histo_createur_id" referenced-column-name="ID"/>
        </many-to-one>
        <many-to-one target-entity="UnicaenUtilisateur\Entity\Db\User"  field="histoModificateur">
            <join-column name="histo_modificateur_id" referenced-column-name="ID"/>
        </many-to-one>
        <many-to-one target-entity="UnicaenUtilisateur\Entity\Db\User"  field="histoDestructeur">
            <join-column name="histo_destructeur_id" referenced-column-name="ID"/>
        </many-to-one>

    </entity>
</doctrine-mapping>
