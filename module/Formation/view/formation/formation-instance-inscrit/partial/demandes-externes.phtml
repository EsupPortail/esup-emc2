<?php

/**
 * @var Agent $agent
 * @var DemandeExterne[] $demandes
 */

use Application\Entity\Db\Agent;
use Fichier\Entity\Db\Fichier;
use Formation\Entity\Db\DemandeExterne;
use Formation\Provider\Etat\DemandeExterneEtats;
use Formation\Provider\Privilege\DemandeexternePrivileges;

$canAjouterDemande      = $this->isAllowed(DemandeexternePrivileges::getResourceId(DemandeexternePrivileges::DEMANDEEXTERNE_AJOUTER));
?>

<h2>
    S'inscire à un stage hors du plan de formation
</h2>

<div class="row">
<div class="col-md-7">
    Afin de réaliser une demande de formation hors plan de formation, vous devez trouver au <em>moins trois</em> organismes et déposer les devis.
</div>
<div class="col-md-5">
    <?php /** @see \Formation\Controller\DemandeExterneController::ajouterAction() */ ?>
    <a href="<?php echo $this->url('formation/demande-externe/ajouter', ['agent' => $agent->getId()], [], true); ?>"
       class="btn btn-primary ajax-modal <?php if (!$canAjouterDemande) echo " disabled "; ?> " data-event="modification"
    >
        <span class="icon icon-ajouter"></span>
        Je remplis le formulaire
    </a>
</div>
</div>

<br/>

<h2> Demandes que je n'ai pas encore validées </h2>

<?php foreach($demandes as $demande) : ?>
    <?php echo $this->demandeExterne($demande); ?>
<?php endforeach; ?>


